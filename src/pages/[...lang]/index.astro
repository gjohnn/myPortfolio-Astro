---
import MainLayout from "../../layouts/MainLayout.astro";
import EducationComponent from "../../components/Myself-Info/EducationComponent.astro";
import Icon from "astro-iconify";
import { skillsCarousels } from "../../data/skills";
import { getLangFromUrl, t, localePath } from "../../i18n/utils";
import type { Lang } from "../../i18n/ui";

export function getStaticPaths() {
  return [
    { params: { lang: undefined } },
    { params: { lang: 'en' } },
  ];
}

const lang = getLangFromUrl(Astro.url) as Lang;
const skills = skillsCarousels[lang];
---

<MainLayout lang={lang}>
  <main class="relative">
    <!-- HERO SECTION -->
    <section class="relative w-full mb-12 sm:mb-16 text-center animate-on-scroll">
      <div class="relative z-10 max-w-4xl mx-auto px-4">
        <!-- Comic Action Burst -->
        <div class="mb-6 sm:mb-8">
          
          <h1 class="mb-4 leading-tight pt-2 sm:pt-4">
            <span class="block text-5xl sm:text-6xl md:text-7xl lg:text-8xl gradient-text" 
                  style="font-family: var(--font-comic); letter-spacing: 2px;">
              Juan
            </span>
            <span class="block text-5xl sm:text-6xl md:text-7xl lg:text-8xl gradient-text" 
                  style="font-family: var(--font-comic); letter-spacing: 2px;">
              Guerrero
            </span>
          </h1>

          <div class="relative inline-block">
            <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-4 sm:mb-6"
                style="font-family: var(--font-accent); color: var(--comic-black); letter-spacing: 1px;">
              {t('hero.role', lang)}
            </h2>
            <div class="mx-auto w-20 sm:w-24 h-1.5 rounded-full" 
                 style="background: var(--comic-red);"></div>
          </div>
        </div>

        <!-- Description Speech Bubble -->
        <div class="mb-8 sm:mb-12 max-w-3xl mx-auto">
          <div class="speech-bubble">
            <p class="text-base sm:text-lg leading-relaxed" style="font-family: var(--font-body); color: var(--comic-black); font-weight: 700;">
              <strong style="color: var(--comic-red);">{t('hero.description.1', lang)}</strong> {t('hero.description.mid', lang)}
              <strong style="color: var(--comic-red);">{t('hero.description.2', lang)}</strong> {t('hero.description.and', lang)}
              <strong style="color: var(--comic-red);">{t('hero.description.3', lang)}</strong>.
              {t('hero.description.end', lang)}
              <span style="color: var(--comic-blue); font-weight: 800;">{t('hero.description.collab', lang)}</span>
              {t('hero.description.end2', lang)}
            </p>
          </div>
        </div>

        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-center mb-10 sm:mb-14 px-4">
          <a href={localePath('/projects', lang)} class="btn btn-primary group w-full sm:w-auto px-6 sm:px-8 py-3 text-base sm:text-lg">
            <i class="fas fa-code mr-2"></i>
            {t('hero.cta.work', lang)}
          </a>
          <a href={localePath('/contact', lang)} class="btn btn-secondary group w-full sm:w-auto px-6 sm:px-8 py-3 text-base sm:text-lg">
            <i class="fas fa-envelope mr-2"></i>
            {t('hero.cta.contact', lang)}
          </a>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-12 sm:mb-16 px-4">
          <div class="card p-4 sm:p-6 text-center" style="border-color: var(--comic-red);">
            <div class="text-3xl sm:text-4xl mb-2" style="font-family: var(--font-comic); color: var(--comic-red);">
              3+
            </div>
            <div class="text-xs sm:text-sm uppercase" style="font-family: var(--font-accent); color: var(--gray-600); letter-spacing: 1px;">
              {t('hero.stat.years', lang)}
            </div>
          </div>
          <div class="card p-4 sm:p-6 text-center" style="border-color: var(--comic-blue);">
            <div class="text-3xl sm:text-4xl mb-2" style="font-family: var(--font-comic); color: var(--comic-blue);">
              10+
            </div>
            <div class="text-xs sm:text-sm uppercase" style="font-family: var(--font-accent); color: var(--gray-600); letter-spacing: 1px;">
              {t('hero.stat.projects', lang)}
            </div>
          </div>
          <div class="card p-4 sm:p-6 text-center" style="border-color: var(--comic-yellow-dark);">
            <div class="text-3xl sm:text-4xl mb-2" style="font-family: var(--font-comic); color: var(--comic-yellow-dark);">
              5+
            </div>
            <div class="text-xs sm:text-sm uppercase" style="font-family: var(--font-accent); color: var(--gray-600); letter-spacing: 1px;">
              {t('hero.stat.tech', lang)}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SKILLS SECTION -->
    <section class="relative w-full animate-on-scroll mb-12 sm:mb-16">
      <div class="text-center mb-8 sm:mb-12 px-4">
        <h2 class="comic-title text-3xl sm:text-4xl md:text-5xl mb-4" style="color: var(--comic-blue);">
          {t('skills.title', lang)}
        </h2>
        <p class="text-base sm:text-lg max-w-2xl mx-auto" style="font-family: var(--font-body); color: var(--gray-600); font-weight: 700;">
          {t('skills.subtitle', lang)}
        </p>
        <div class="mt-4 sm:mt-6 w-20 sm:w-24 h-1.5 rounded-full mx-auto" style="background: var(--comic-blue);"></div>
      </div>

      <!-- Skills Grid -->
      <div class="mb-12 sm:mb-16 max-w-6xl mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {skills.map((section, idx) => {
            const colors = ['var(--comic-red)', 'var(--comic-orange)', 'var(--comic-blue)', 'var(--comic-green)', 'var(--comic-purple)', 'var(--comic-yellow-dark)'];
            const color = colors[idx % colors.length];
            return (
              <div class="card p-5 sm:p-6" style={`border-top: 4px solid ${color};`}>
                <h3 class="text-lg mb-4 flex items-center gap-2" style={`font-family: var(--font-comic); color: ${color}; letter-spacing: 1px;`}>
                  <span class="inline-block w-3 h-3 rounded-sm" style={`background: ${color}; border: 2px solid var(--comic-black);`}></span>
                  {section.title}
                </h3>
                <div class="flex flex-wrap gap-2">
                  {section.skills.map((skill) => (
                    <span class="tech-badge inline-flex items-center gap-1.5">
                      {skill.icon.startsWith("http") ? (
                        <img src={skill.icon} alt={skill.name} class="w-4 h-4" loading="lazy" />
                      ) : (
                        <Icon name={skill.icon} class="w-4 h-4" />
                      )}
                      {skill.name}
                    </span>
                  ))}
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </section>

    <!-- EDUCATION SECTION -->
    <section class="relative w-full animate-on-scroll mb-12 sm:mb-16">
      <div class="text-center mb-8 sm:mb-12 px-4">
        <h2 class="comic-title text-3xl sm:text-4xl md:text-5xl mb-4" style="color: var(--comic-green);">
          {t('education.title', lang)}
        </h2>
        <p class="text-base sm:text-lg max-w-2xl mx-auto" style="font-family: var(--font-body); color: var(--gray-600); font-weight: 700;">
          {t('education.subtitle', lang)}
        </p>
        <div class="mt-4 sm:mt-6 w-20 sm:w-24 h-1.5 rounded-full mx-auto" style="background: var(--comic-green);"></div>
      </div>

      <div class="max-w-4xl mx-auto px-4">
        <EducationComponent lang={lang} />
      </div>
    </section>

    <!-- CTA SECTION -->
    <section class="relative w-full mt-12 sm:mt-16 animate-on-scroll">
      <div class="flex justify-center px-4">
        <div class="card p-8 sm:p-12 max-w-2xl w-full text-center" style="border-color: var(--comic-red); border-width: 4px;">
          <div class="comic-action inline-block mb-4" style="font-size: 0.8rem;">{t('cta.teamUp', lang)}</div>
          <h2 class="comic-title text-2xl sm:text-3xl md:text-4xl mb-4" style="color: var(--comic-red);">
            {t('cta.title', lang)}
          </h2>
          <p class="mb-6 sm:mb-8 max-w-xl mx-auto" style="font-family: var(--font-body); color: var(--gray-600); font-weight: 700;">
            {t('cta.description', lang)}
          </p>
          <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
            <a href={localePath('/contact', lang)} class="btn btn-primary group px-6 sm:px-8 py-3">
              <i class="fas fa-handshake mr-2"></i>
              {t('cta.startProject', lang)}
            </a>
            <a href="/JuanGuerreroCv_Public.pdf" download="Juan_SebastiÃ¡n_Guerrero_Britos_CV.pdf"
               class="btn btn-secondary group px-6 sm:px-8 py-3">
              <i class="fas fa-download mr-2"></i>
              {t('cta.downloadResume', lang)}
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>
</MainLayout>
