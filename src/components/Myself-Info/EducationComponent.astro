---
import { educationData } from '../../data/my-education';
import { t } from '../../i18n/utils';
import { defaultLang, type Lang } from '../../i18n/ui';

interface Props {
  lang?: Lang;
}

const { lang = defaultLang } = Astro.props;
const data = educationData[lang] ?? educationData[defaultLang];

const typeIcons: Record<string, string> = {
  degree: 'fas fa-graduation-cap',
  certification: 'fas fa-certificate',
  school: 'fas fa-school',
};

const typeColors: Record<string, string> = {
  degree: 'var(--comic-blue)',
  certification: 'var(--comic-green)',
  school: 'var(--comic-orange)',
};
---

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  {data.map((edu, index) => (
    <article class="card p-5 sm:p-6 relative group animate-on-scroll"
             style={`border-left: 5px solid ${typeColors[edu.type]};`}>
      
      {/* Status Badge */}
      {edu.status === 'current' && (
        <div class="absolute -top-2 -right-2 comic-badge flex items-center gap-1"
             style="background: var(--comic-green); color: white; font-size: 0.65rem;">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full opacity-75" style="background: white;"></span>
            <span class="relative inline-flex rounded-full h-2 w-2" style="background: white;"></span>
          </span>
          {t('education.activeNow', lang)}
        </div>
      )}
      {edu.status === 'completed' && (
        <div class="absolute -top-2 -right-2 comic-badge flex items-center gap-1"
             style="background: var(--comic-blue); color: white; font-size: 0.65rem;">
          <i class="fas fa-check text-xs"></i>
          {t('education.completed', lang)}
        </div>
      )}

      {/* Icon & Title */}
      <div class="flex items-start gap-3 mb-3">
        <div class="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0"
             style={`background: ${typeColors[edu.type]}; border: 2px solid var(--comic-black); box-shadow: 2px 2px 0 var(--comic-black);`}>
          <i class={`${typeIcons[edu.type]} text-white`}></i>
        </div>
        <div class="flex-1">
          <h3 class="text-base sm:text-lg leading-tight" 
              style={`font-family: var(--font-comic); color: ${typeColors[edu.type]}; letter-spacing: 0.5px;`}>
            {edu.title}
          </h3>
          <p class="text-sm mt-1" style="font-family: var(--font-body); color: var(--gray-600); font-weight: 700;">
            {edu.institution}
          </p>
        </div>
      </div>

      {/* Period */}
      <div class="flex items-center gap-2 mb-3">
        <i class="fas fa-calendar-alt text-xs" style={`color: ${typeColors[edu.type]};`}></i>
        <span class="text-xs" style="font-family: var(--font-accent); color: var(--gray-500); letter-spacing: 0.5px;">{edu.period}</span>
      </div>

      {/* Description */}
      {edu.description && (
        <p class="text-sm leading-relaxed" style="font-family: var(--font-body); color: var(--gray-700); font-weight: 700;">
          {edu.description}
        </p>
      )}
    </article>
  ))}
</div>